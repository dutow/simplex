
CMAKE_MINIMUM_REQUIRED( VERSION 3.1 )

PROJECT( Bootstrap )

# defaults
IF(NOT DEFINED MAIN_BUILD_TYPE)
	SET(MAIN_BUILD_TYPE relwithdebinfo)
ENDIF(NOT DEFINED MAIN_BUILD_TYPE)

SET( CMAKE_MODULE_PATH ${PROJECT_SOURCE_DIR}/cmake/modules ${PROJECT_SOURCE_DIR}/../cmake/modules ${CMAKE_MODULE_PATH} )

SET ( CMAKE_DEPENDENCY_PATH ${PROJECT_BINARY_DIR} )

ADD_DEFINITIONS( -D_UNICODE -DUNICODE)

INCLUDE (ExternalProject)

LIST(APPEND BOOTSTRAP_THIRDPARTYLIBS_ARGS
  "../"
#  "-DCMAKE_BUILD_TYPE=\"${MAIN_BUILD_TYPE}\""
    )
	
IF(DEFINED MAIN_PROJECT_GENERATOR)
LIST(APPEND BOOTSTRAP_THIRDPARTYLIBS_ARGS
	"-G \"${MAIN_PROJECT_GENERATOR}\""
)
ENDIF(DEFINED MAIN_PROJECT_GENERATOR)

# TARGET DEFINITION

INCLUDE( GetEasylogging )
INCLUDE( GetGLM )
INCLUDE( GetGLEW )
INCLUDE( GetBoost )

MESSAGE ( STATUS ${BOOTSTRAP_THIRDPARTYLIBS_ARGS} )

add_custom_target(gen_real_cmake ALL
	COMMAND cd ..
	COMMAND ${CMAKE_COMMAND} ${BOOTSTRAP_THIRDPARTYLIBS_ARGS} -DSIMPLEX_MAGIC_ASSETS="${SIMPLEX_MAGIC_ASSETS}"
)
	
add_dependencies(gen_real_cmake glm glew sfml boost mruby easylogging)